{% extends 'base.html' %}

{% block title %}Delete Event - Legal Case Manager{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-6">
        <div class="alert alert-danger" role="alert">
            <h4 class="alert-heading">
                <i class="bi bi-exclamation-triangle me-2"></i>
                Confirm Event Deletion
            </h4>
            <p>Are you sure you want to delete the event "<strong>{{ object.title }}</strong>"?</p>
            
            <div class="card border-0 bg-light mt-3">
                <div class="card-body p-3">
                    <div class="row">
                        <div class="col-sm-4"><strong>Event:</strong></div>
                        <div class="col-sm-8">{{ object.title }}</div>
                    </div>
                    <div class="row">
                        <div class="col-sm-4"><strong>Case:</strong></div>
                        <div class="col-sm-8">{{ object.case.title }} ({{ object.case.uid }})</div>
                    </div>
                    <div class="row">
                        <div class="col-sm-4"><strong>Date:</strong></div>
                        <div class="col-sm-8">{{ object.starts_at|date:"M d, Y H:i" }}</div>
                    </div>
                    {% if object.attendees.all %}
                    <div class="row">
                        <div class="col-sm-4"><strong>Attendees:</strong></div>
                        <div class="col-sm-8">{{ object.get_attendees_list }}</div>
                    </div>
                    {% endif %}
                </div>
            </div>
            
            <hr>
            <p class="mb-0">
                <strong>This action cannot be undone.</strong> 
                {% if object.attendees.all %}
                All attendees will no longer have access to this event.
                {% endif %}
                {% if not object.reminder_sent and object.reminder_minutes > 0 %}
                Scheduled reminders will also be cancelled.
                {% endif %}
            </p>
        </div>
        
        <div class="d-flex gap-2 justify-content-center">
            <a href="{% url 'event_detail' object.pk %}" class="btn btn-secondary">
                <i class="bi bi-x-circle me-2"></i>Cancel
            </a>
            <form method="post" class="d-inline">
                {% csrf_token %}
                <button type="submit" class="btn btn-danger">
                    <i class="bi bi-trash me-2"></i>Delete Event
                </button>
            </form>
        </div>
    </div>
</div>
{% endblock %}
